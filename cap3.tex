\section{Aplanado de Modelos}

\begin{frame}[fragile]
\frametitle{Modelo Aplanado} 
\begin{enumerate}
\item Modelo monol\'itico.
\item Variables de tipo b\'asicos.
\item Carencias de clases.

\end{enumerate}
\end{frame}


\begin{frame}[fragile]
\frametitle{Algoritmo de Aplanado} 
\begin{lstlisting}[style=base,basicstyle=\tiny]
Flat(C):
    @2Expand(C);@
    foreach v in Variables(C):
        t = @2ResolveType(v)@;
        if isBasic(t) then 
            ChangeType(v,t);
        else if isClass(t) AND NOT isConnector(t) then
            @2ApplyModification(C,t,Modification(v));@
            Flat(t);
            @2RemoveComposition(C,t);@  
            if isConnector(t) then
                ChangeType(v,t);
            else
                Remove(t);
            end if;     
        end if;     
    end foreach;    
    foreach e in Equations(C):  
        @2ChangeVarName(e);@
    foreach e in Statements(C): 
        ChangeVarName(e);           
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
\frametitle{Simulaci\'on de Modelos Modelica} 
\begin{lstlisting}[style=base,basicstyle=\tiny]
package Circuits
    model LC_circuit
        capacitor cap(v(start = 1));
        inductor ind(L = 2);
        Pin p1,p2,p3;
    equation
        connect(ind.p,p3);
        connect(ind.p,cap.p);
        connect(cap.n,p1);
        connect(ind.n,p2);
    end LC_circuit;
    
    model LC_line
        @constant Integer N = 10;@
        @LC_circuit lc[N];@
        ground gr;
    equation
        connect(lc[N].p1,lc[N].p2)      
        for i in 1:N - 1 loop
            connect(lc[i + 1].p3,lc[i].p2);
        end for;
        for i in 1:N loop
            connect(gr.p,lc[i].p1);
        end for;
    end LC_line;
end Circuits;   
\end{lstlisting}
\end{frame}



\begin{frame}[fragile]
\frametitle{ResolveType} 
Determina el tipo real de una variable y sus caracter\'isticas: 
\begin{itemize}
	\item Definici\'on de Arreglos. 
	\item Presencia de modificaciones.
\end{itemize}



\end{frame}
